define ("format_timeline/createpost_modal",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/ajax"],function(a,b,c,d,e,f){var g=!1,h={SAVE_BUTTON:"[data-action=\"save\"]",CANCEL_BUTTON:"[data-action=\"cancel\"]"},i=function(a){d.call(this,a)};i.TYPE="format_timeline-create_post_modal";i.prototype=Object.create(d.prototype);i.prototype.constructor=i;i.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this);this.getModal().on(c.events.activate,h.SAVE_BUTTON,function(){var c=a("#post-message").val();if(""===c||10>c.length){a("#post-message").addClass("is-invalid");a("#post-message-feedback").removeClass("d-none");return}var d=a("#create-post-btn"),e=f.call([{methodname:"format_timeline_createpost",args:{post:{courseid:d.data("courseid"),message:a("#post-message").val()}}}]);e[0].done(function(){document.location.reload(!0)}.bind(this)).fail(function(a){var c=a.message;if(!c){c=a.error}b.addNotification({message:c,type:"error"});this.hide();this.destroy()}.bind(this))}.bind(this));this.getModal().on(c.events.activate,h.CANCEL_BUTTON,function(){this.hide();this.destroy()}.bind(this))};if(!g){e.register(i.TYPE,i,"format_timeline/createpost_modal");g=!0}return i});
//# sourceMappingURL=createpost_modal.min.js.map
