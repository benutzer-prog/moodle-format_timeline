define ("format_timeline/deletepost",["jquery","core/notification","core/ajax","format_timeline/sweetalert"],function(a,b,c,d){var e=function(){this.registerEventListeners()};e.prototype.registerEventListeners=function(){a(".delete-post").click(function(b){b.preventDefault();var c=a(b.currentTarget);d.fire({title:"Voc\xEA tem certeza disso?",text:"Depois de exclu\xEDda a publica\xE7\xE3o n\xE3o poder\xE1 ser recuperada!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, pode excluir!",cancelButtonText:"Cancelar"}).then(function(a){if(a.value){this.deletePost(c)}}.bind(this))}.bind(this))};e.prototype.deletePost=function(a){var b=c.call([{methodname:"format_timeline_deletepost",args:{post:{id:a.data("id")}}}]);b[0].done(function(){this.removeDiscuss(a)}.bind(this)).fail(function(a){var b=a.message;if(!b){b=a.error}this.showToast("error",b)})};e.prototype.removeDiscuss=function(b){var c=b.closest("div.discuss");c.fadeOut("normal",function(){a(this).remove()});this.showToast("success","Publica\xE7\xE3o exclu\xEDda com sucesso.")};e.prototype.showToast=function(a,b){var c=d.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:8e3,timerProgressBar:!0,onOpen:function onOpen(a){a.addEventListener("mouseenter",d.stopTimer);a.addEventListener("mouseleave",d.resumeTimer)}});c.fire({icon:a,title:b})};return{init:function init(){return new e}}});
//# sourceMappingURL=deletepost.min.js.map
