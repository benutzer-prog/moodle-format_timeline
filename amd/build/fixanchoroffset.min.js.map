{"version":3,"sources":["../src/fixanchoroffset.js"],"names":["define","HISTORY_SUPPORT","history","pushState","anchorScrolls","ANCHOR_REGEX","OFFSET_HEIGHT_PX","init","scrollToCurrent","window","addEventListener","bind","document","body","delegateAnchors","getFixedOffset","scrollIfAnchor","href","pushToHistory","match","rect","anchorOffset","test","getElementById","slice","getBoundingClientRect","pageYOffset","top","scrollTo","pageXOffset","title","location","pathname","hash","e","elem","target","nodeName","getAttribute","preventDefault"],"mappings":"AAAAA,OAAM,mCAAC,EAAD,CAAK,UAAW,IACdC,CAAAA,CAAe,CAAG,CAAC,EAAEC,OAAO,EAAIA,OAAO,CAACC,SAArB,CADL,CAGdC,CAAa,CAAG,CAChBC,YAAY,CAAE,UADE,CAEhBC,gBAAgB,CAAE,EAFF,CAMhBC,IAAI,CAAE,eAAW,CACb,KAAKC,eAAL,GACAC,MAAM,CAACC,gBAAP,CAAwB,YAAxB,CAAsC,KAAKF,eAAL,CAAqBG,IAArB,CAA0B,IAA1B,CAAtC,EACAC,QAAQ,CAACC,IAAT,CAAcH,gBAAd,CAA+B,OAA/B,CAAwC,KAAKI,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CAAxC,CACH,CAVe,CAgBhBI,cAAc,CAAE,yBAAW,CACvB,MAAO,MAAKT,gBACf,CAlBe,CA0BhBU,cAAc,CAAE,wBAASC,CAAT,CAAeC,CAAf,CAA8B,CAC1C,GAAIC,CAAAA,CAAJ,CAAWC,CAAX,CAAiBC,CAAjB,CAEA,GAAG,CAAC,KAAKhB,YAAL,CAAkBiB,IAAlB,CAAuBL,CAAvB,CAAJ,CAAkC,CAC9B,QACH,CAEDE,CAAK,CAAGP,QAAQ,CAACW,cAAT,CAAwBN,CAAI,CAACO,KAAL,CAAW,CAAX,CAAxB,CAAR,CAEA,GAAGL,CAAH,CAAU,CACNC,CAAI,CAAGD,CAAK,CAACM,qBAAN,EAAP,CACAJ,CAAY,CAAGZ,MAAM,CAACiB,WAAP,CAAqBN,CAAI,CAACO,GAA1B,CAAgC,KAAKZ,cAAL,EAA/C,CACAN,MAAM,CAACmB,QAAP,CAAgBnB,MAAM,CAACoB,WAAvB,CAAoCR,CAApC,EAGA,GAAGpB,CAAe,EAAIiB,CAAtB,CAAqC,CACjChB,OAAO,CAACC,SAAR,CAAkB,EAAlB,CAAsBS,QAAQ,CAACkB,KAA/B,CAAsCC,QAAQ,CAACC,QAAT,CAAoBf,CAA1D,CACH,CACJ,CAED,MAAO,CAAC,CAACE,CACZ,CA/Ce,CAoDhBX,eAAe,CAAE,0BAAW,CACxB,KAAKQ,cAAL,CAAoBP,MAAM,CAACsB,QAAP,CAAgBE,IAApC,CACH,CAtDe,CA2DhBnB,eAAe,CAAE,yBAASoB,CAAT,CAAY,CACzB,GAAIC,CAAAA,CAAI,CAAGD,CAAC,CAACE,MAAb,CAEA,GACsB,GAAlB,GAAAD,CAAI,CAACE,QAAL,EACA,KAAKrB,cAAL,CAAoBmB,CAAI,CAACG,YAAL,CAAkB,MAAlB,CAApB,IAFJ,CAGE,CACEJ,CAAC,CAACK,cAAF,EACH,CACJ,CApEe,CAHF,CA0ElB9B,MAAM,CAACC,gBAAP,CACI,kBADJ,CACwBN,CAAa,CAACG,IAAd,CAAmBI,IAAnB,CAAwBP,CAAxB,CADxB,EAIA,MAAOA,CAAAA,CACV,CA/EK,CAAN","sourcesContent":["define([], function() {\n    var HISTORY_SUPPORT = !!(history && history.pushState);\n\n    var anchorScrolls = {\n        ANCHOR_REGEX: /^#[^ ]+$/,\n        OFFSET_HEIGHT_PX: 72,\n        /**\n         * Establish events, and fix initial scroll position if a hash is provided.\n         */\n        init: function() {\n            this.scrollToCurrent();\n            window.addEventListener('hashchange', this.scrollToCurrent.bind(this));\n            document.body.addEventListener('click', this.delegateAnchors.bind(this));\n        },\n\n        /**\n         * Return the offset amount to deduct from the normal scroll position.\n         * Modify as appropriate to allow for dynamic calculations\n         */\n        getFixedOffset: function() {\n            return this.OFFSET_HEIGHT_PX;\n        },\n\n        /**\n         * If the provided href is an anchor which resolves to an element on the\n         * page, scroll to it.\n         * @param  {String} href\n         * @return {Boolean} - Was the href an anchor.\n         */\n        scrollIfAnchor: function(href, pushToHistory) {\n            var match, rect, anchorOffset;\n\n            if(!this.ANCHOR_REGEX.test(href)) {\n                return false;\n            }\n\n            match = document.getElementById(href.slice(1));\n\n            if(match) {\n                rect = match.getBoundingClientRect();\n                anchorOffset = window.pageYOffset + rect.top - this.getFixedOffset();\n                window.scrollTo(window.pageXOffset, anchorOffset);\n\n                // Add the state to history as-per normal anchor links\n                if(HISTORY_SUPPORT && pushToHistory) {\n                    history.pushState({}, document.title, location.pathname + href);\n                }\n            }\n\n            return !!match;\n        },\n\n        /**\n         * Attempt to scroll to the current location's hash.\n         */\n        scrollToCurrent: function() {\n            this.scrollIfAnchor(window.location.hash);\n        },\n\n        /**\n         * If the click event's target was an anchor, fix the scroll position.\n         */\n        delegateAnchors: function(e) {\n            var elem = e.target;\n\n            if(\n                elem.nodeName === 'A' &&\n                this.scrollIfAnchor(elem.getAttribute('href'), true)\n            ) {\n                e.preventDefault();\n            }\n        }\n    };\n\n    window.addEventListener(\n        'DOMContentLoaded', anchorScrolls.init.bind(anchorScrolls)\n    );\n\n    return anchorScrolls;\n});"],"file":"fixanchoroffset.min.js"}